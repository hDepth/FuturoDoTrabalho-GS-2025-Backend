CREATE TABLE users (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR2(200),
  email VARCHAR2(255) UNIQUE,
  password_hash VARCHAR2(200),
  role VARCHAR2(20) DEFAULT 'user',
  created_at TIMESTAMP DEFAULT SYSTIMESTAMP,
  updated_at TIMESTAMP DEFAULT SYSTIMESTAMP
);
CREATE TABLE wallets (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id NUMBER NOT NULL,
  xp NUMBER DEFAULT 0,
  coins NUMBER DEFAULT 0,
  gems NUMBER DEFAULT 0,
  level NUMBER DEFAULT 1,
  created_at TIMESTAMP DEFAULT SYSTIMESTAMP,
  updated_at TIMESTAMP DEFAULT SYSTIMESTAMP,
  CONSTRAINT fk_wallet_user FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
CREATE TABLE submissions (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id NUMBER NOT NULL,
  goal_id NUMBER NOT NULL,
  evidence_url VARCHAR2(1000),
  comment VARCHAR2(2000),
  status VARCHAR2(20) DEFAULT 'pending',
  awarded_xp NUMBER DEFAULT 0,
  awarded_coins NUMBER DEFAULT 0,
  awarded_gems NUMBER DEFAULT 0,
  created_at TIMESTAMP DEFAULT SYSTIMESTAMP,
  updated_at TIMESTAMP DEFAULT SYSTIMESTAMP,
  CONSTRAINT fk_sub_user FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
CREATE TABLE reward_redemptions (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id NUMBER NOT NULL,
  store_item_id NUMBER NOT NULL,
  price_coins NUMBER DEFAULT 0,
  price_gems NUMBER DEFAULT 0,
  status VARCHAR2(20) DEFAULT 'completed',
  created_at TIMESTAMP DEFAULT SYSTIMESTAMP,
  CONSTRAINT fk_redeem_user FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
